<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Create a div where the graph will take place -->
<div id="the_jordan_effect"></div>
  <style>
    rect {
      fill: steelblue;
      stroke: black;
    }
  </style>
  <body>
    <script>
        // set the dimensions and margins of the graph
        var margin = {top: 10, right: 30, bottom: 30, left: 60},
            width = 700 - margin.left - margin.right,
            height = 700 - margin.top - margin.bottom;
        
        // append the svg object to the body of the page
        var svg = d3.select("#the_jordan_effect")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                    "translate("+margin.left+", "+margin.top+")");
        
          //Read the data
        Promise.all([
          d3.csv("https://raw.githubusercontent.com/Zman94/the_jordan_effect_dashboard/master/data/Attendance_plus_final.csv"),
          d3.csv("https://raw.githubusercontent.com/Zman94/the_jordan_effect_dashboard/master/data/team_info.csv"),
        ]).then(function(data) {

          console.log(data[0]);

          // sort data
          data.sort(function(b, a) {
            return a.AttendG - b.AttendG;
          });

          
          // X axis
          var x = d3.scaleBand()
            .range([ 0, width ])
            .domain(data.map(function(d) { return d.Tm; }))
            .padding(0.2);
          svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x))
            .selectAll("text")
              .attr("transform", "translate(-10,0)rotate(-45)")
              .style("text-anchor", "end");

          // Add Y axis
          var y = d3.scaleLinear()
            .domain([0, 13000])
            .range([ height, 0]);
          svg.append("g")
            .call(d3.axisLeft(y));

          // Add dots
          svg.append('g')
              .selectAll("rect")
              .data(data)
              .enter()
              .append("rect")
                  .attr("width", x.bandwidth())
                  .attr("height", function (d) { return y(d[0].AttendG.replace(/\,/g,'')); } )
                  .attr("x", function(d) { return x(d[0].Tm); })
                  .attr("y", function(d) { return height-y(d[0].AttendG.replace(/\,/g,'')); })
                  .attr("fill", function(d) { return d[1].Color; });
        }).catch(function(err) {
          console.log("Load Error");
        });
    </script>
  </body>
</html>


<!-- <script type="text/javascript" src="https://widgets.sports-reference.com/wg.fcgi?css=1&site=br&url=%2Fleagues%2FMLB%2F1900-misc.shtml&div=div_teams_miscellaneous"></script>
    <script type="text/javascript" src="https://widgets.sports-reference.com/wg.fcgi?css=1&site=br&url=%2Fleagues%2FMLB%2F1901-misc.shtml&div=div_teams_miscellaneous"></script>
<script type="text/javascript" src="https://widgets.sports-reference.com/wg.fcgi?css=1&site=br&url=%2Fleagues%2FMLB%2F1901-misc.shtml&div=div_teams_miscellaneous"></script>
<script type="text/javascript" src="https://widgets.sports-reference.com/wg.fcgi?css=1&site=br&url=%2Fleagues%2FMLB%2F2001-misc.shtml&div=div_teams_miscellaneous"></script>
add the following text to the end of the src="..." value below &del_col=1,5,10 where 1, 5 and 10 are the columns you want to remove counting from left to right. -->